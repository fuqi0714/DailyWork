
# 操作系统引论
## 操作系统的类别
单道批处理系统P7

多道批处理系统P8

# 进程
## 进程定义、描述、结构
定义与结构P43

数据结构P47-P49

# 处理机
## 调度算法
调度算法P77-P81

进程A、B、C、D、E几乎同时到达的，运行分别时间为7、5、6、15、4min。其优先级分别为3、5、2、1和4(设置5为最高优先级)。对于下列提出的调度算法，写出执行序列，并计算其平均进程周转时间（进程切换开销可不考虑）。
- 先来先服务(进程到达顺序为A、B、C、D、E)算法；
- 优先级调度算法。

先来先服务
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/021-1.png)

优先级
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/021-2.png)



## 死锁
定义以及必要条件P95、处理方法P96，详细内容P97-P104

# 进程同步
## 信号量
信号量机制P116-P119

同步信号量P135第20题

分析:
由题可知3个人对1个盘子内的5个水果进行共享操作，并且盘子访问事件同一时刻只能满足1个人使用，因此在3个人不停对盘子进行操作的情况，在访问前需要对盘子的状态进行判断和验证。将盘子内的可操作次数、可使用盘子的用户以及水果种类量化为信号量

    semaphore empty=5，mutex=1，orange=0，apple=0

爸爸操作流程如下

- 先判断盘子内是否满足“放”操作，即empty是否大于0。当empty大于0且进行P操作，相当于将盘子内的空闲资源数减1，并在后续对水果的资源数加1
- 若满足，对盘子进行使用声明，避免在使用结束前儿子和女儿介入盘子的使用。并在使用结束后声明完成使用
    - 若无，则将流程暂停，等待满足使用情况继续使用
- 在放入水果后，根据放入水果种类将对应的信号量增加。确保可用资源量化后可进行操作

过程细节

    P(empty);
    P(mutex);
    将水果放入盘中;
    V(mutex);
    if( 放入的是橘子 )
       V(orange);
    else
       V(apple);


儿女操作流程如下
- 先判断是否有满足要求的水果
- 若有，对盘子内可进行的“取”操作次数进行使用声明，避免在执行“取”操作结束前，其他请求插入导致盘子可进行的操作次数产生变化。并在使用结束后声明完成使用
    - 若无，则将流程暂停，等待满足使用情况继续使用
- 在取出满足要求的水果后，根据水果种类将对应的信号量减少。确保可用资源量化后与实际数量一致

过程细节

    P(orange/apple);
    P(mutex);
    从盘中取一个橘子/苹果;
    V(mutex);
    V(empty);
    使用橘子/苹果;

补充结构

    semaphore empty=5，mutex=1，orange=0，apple=0
    Dad(){
        while(true){
            P(empty);
            P(mutex);
            将水果放入盘中;
            V(mutex);
            if( 放入的是橘子 )
                V(orange);
            else
                V(apple);
            }
    }

    Son(){
        while(true){
            P(orange);
            P(mutex);
            从盘中取一个橘子;
            V(mutex);
            V(empty);
            使用橘子;
        }
    }
    Daughter(){
        while(true){
            P(apple);
            P(mutex);
            从盘中取一个苹果;
            V(mutex);
            V(empty);
            使用苹果;
        }
    }

# 存储器
## 分页存储管理
分页与页表P154-157

对一个将页表放在内存中的分页系统：
- 在将页内地址转为物理块号地址的过程中，需要访问几次内存
    - 有效访问时间：进程发出指定逻辑地址的访问请求，经地址变换，到在内存中找到对应的实际物理地址单元并取出数据，这一过程需要花费的总时间成为内存的有效访问时间，引入页表的情况下，需要访问内存两次
- 如果在地址转换的过程中花费的有效访问时间为1μs，则单次访问内存需要的时间是多少
    - 总时间(两次访问)需要1μs，单次需要0.5μs
- 如果引入快表的结构，且假定在快表中找到页表的几率高达90%，则有效访问时间又是多少？（忽略快表访问时间）
    - 命中率计算公式：快表命中率 *单次内存访问时间+快表未命中率 *(访问内存中页表需要的时间+在获得页表物理块号后的第二次访问内存的时间)
        - 0.9*0.5+(1-0.9) *2 *0.5=0.55μs
    - 补充：实际上在引入快表结构的分页系统中，实际访问时间只有两种结果。即快表内已保存需要访问的内存块号和快表内未保存需要访问的内存块号，前者由于快表物理元件存在CPU内，因此可以直接获取到内存块号并且只需要再访问一次内存；若是后者的情况，需要先访问该进程存放在内存中的页表，通过查询页表获得访问的内存块号会返回给CPU，CPU继而根据获得的访问的内存块号再次访问内存。但为了计算和体现结构改变前后的变化，一般题目中的有效访问时间是取两种时间结果的平均值。以此题为例，假设进程执行期间的有效访问次数总数为100次，在快表中获取到地址的次数为90次，则剩余10次需要先查询页表。则100次所需要的总时间为90 *0.5 +10 *(0.5+0.5)=55μs，那么单次平均有效访问时间为55μs/100=0.55μs。用命中率替代实际访问次数则是为了反映两种情况下各自对应的权值

## 请求分页存储管理
页面置换算法P181-P183

请求分页系统中，假如一个作业的页面调入顺序为 4、3、2、1、4、3、5、4、3、2、1、5，目前它还没有任何页装入内存，当分配给该作业的物理块数M为3时，采用FIFO、LRU页面置换算法计算在访问过程中所发生的缺页次数和缺页率。
- 缺页：需要访问的页面号不在主存物理块内，需要从外存调入页面数据的行为
    - 缺页次数： 缺页行为发生的次数
- 缺页率：缺页次数/访问页面总次数

FIFO替换标准：当需要访问的页面不在主存物理块内，选择主存物理块中存储数据最久的那一页数据换出并将需要访问的页面数据写入
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/023-1.png)


LRU替换标准：当需要访问的页面不在主存物理块内，比较所有主存物理块内的存储数据最近一次访问的时间记录，选择访问时间离当前时间最久的那块数据换出并将需要访问的页面数据写入到该物理块内

表示形式一

![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/023-2-1.png)
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/023-2-2.png)

表示形式二

![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/023-2-1.png)
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/023-2-3.png)

## 抖动
定义和策略P188-P190


# IO
## 控制方式
IO设备的控制P210-213

## 物理设备与逻辑设备
P223

## 缓冲区
缓冲区种类P232-P237

## 磁道调度算法
例

若磁头当前位于磁道号105道，正在向磁道号递增的方向移动。当前存在磁道访问请求序列35、45、12、68、110、180、170、195，计算采用SCAN调度算法得到的磁道访问顺序和总移动磁道数

![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/029-1.png)
磁道调度算法P246第17题

附
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/029-2-1.png)
![](https://github.com/fuqi0714/DailyWork/blob/main/OS/res/029-2-2.png)


# 文件
## 定义
P249-P250

文件目录P259-P260